#!/bin/bash

#######################################################################
# Get the current script path
#######################################################################

SCRIPT_FILE="$0"
SCRIPT_PATH=`dirname "$SCRIPT_FILE"`

#######################################################################
# credentials for the ftp server
#######################################################################
FTP_SERVER="${1:-'localhost'}"
FTP_USER="${2:-'root'}"
FTP_PASSWORD="${3:-''}"

#######################################################################
# The directory to Save the files in
#######################################################################
SAVE_DIR="${4:-$SCRIPT_PATH/DATA/lftp}"


#######################################################################
# The directory to Save the files in
#######################################################################
FROM_DIR="${5:-/}"

#######################################################################
# how long to keep the backups
#######################################################################
# KEEP_FILES_FOR=$(( 60 * 24 * 30 )) # 30 days

#######################################################################
# the log file
#######################################################################
LOG_PATH="$SCRIPT_PATH/backup.log"

#######################################################################

LIB="$SCRIPT_PATH/lib-general.sh"
if [ ! -f "$LIB" ]; then echo "The general lib is missing (Search: $LIB)"; exit; fi
. "$LIB"

LIB="$SCRIPT_PATH/lib-lftp.sh"
if [ ! -f "$LIB" ]; then echo "The lftp lib is missing (Search: $LIB)"; exit; fi
. "$LIB"


getDir "$SAVE_DIR" "$FROM_DIR"
